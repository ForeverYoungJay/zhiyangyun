# OA1 自动准备清单（M7 完成后）

> 状态：✅ 已完成并落地

## 目标
1. OA1 排班模板/排班记录接口统一升级为分页+检索+筛选
2. 前端 OA1 全面姓名化展示（人员名替代 user_id 直出）
3. 排班状态流转补全（草稿/已发布/已执行/异常）
4. 回归脚本补充 OA1 关键链路校验

## 本次实际完成
- 后端：`/oa1-shift/templates`、`/oa1-shift/assignments` 支持分页、keyword、status 等筛选
- 后端：`/oa1-shift/assignments/{id}/status` 支持 `publish/execute/mark_exception/reopen`
- 后端：排班查询返回 `user_name/username/shift_name`，用于姓名化展示
- 前端：OA1 页面升级为模板+排班双列表，支持搜索、分页、状态操作
- 脚本：`scripts/api_regression.py` 增加 OA1 分页、姓名化、状态流转校验
- 文档：README/docs 已同步

## 迁移
- `backend/alembic/versions/2026021120_oa1_upgrade.py`
  - `shift_templates` 新增 `status`
  - 历史 `shift_assignments.status=assigned` 自动归一为 `draft`
